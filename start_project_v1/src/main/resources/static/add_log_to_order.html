
<div class="alert alert-danger" ng-show="controller.error">
	<strong>Fail!</strong>{{controller.actionMsg}}
</div>

<div class="page-header">
	<h3>Add event log for <span ng-show="controller.newEvent.type==1">Procurement Order '{{controller.selectedOrder.summary}}'</span>
	<span ng-show="controller.newEvent.type==2">Shipment</span></h3>
</div>

<div class="alert alert-info fade in">
			<strong>Note! </strong> Changing Log Event leads to changes on order's status. For Example, adding contract-Signoff Event will Change the order status from negotiating to in-progress, and also set the start date to be the log event date.
</div>


<div class="container">
	<form role="form">
		<div class="form-group">
			<label class="col-sm-2 control-label">Action:</label>
			<div  class="col-sm-10">
				<select class="form-control" ng-model="controller.newEvent.actionType">
					<option value="">--------please select an action of this log</option>
					<option value="1">Negotiating</option>
					<option value="2">Contract Sign-off</option>
				</select>
			</div>
		</div>
		<div class="divider"></div>
		<div class="form-group">
			<label class="col-sm-2 control-label">Logger</label>
			<div  class="col-sm-10">
				<input type="text" class="form-control" ng-model="controller.newEvent.logger"/>
			</div>
		</div>
		
				
		
		<div class="divider"></div>
		<div class="form-group">
			<div class="col-sm-2 control-label">Log Date</div>
			<div  class="col-sm-10">
				<Label class="control-label">{{controller.newEvent.dateOfLogging | date:"MMM d, y h:mm"}}</Label>
			</div>
		</div>
		

		
		<div class="divider"></div>
		<div class="form-group">
			<div class="col-sm-2 control-label">Event Date</div>
			<div  class="col-sm-10">
				<input class="form-control" type="date" ng-model="controller.newEvent.dateOfEvent" placeholder="yyyy-MM-dd" required/>
			</div>
		</div>
		
		<div class="divider"></div>
		<div class="form-group">
			<div class="col-sm-2 control-label">Log Content</div>
			<div  class="col-sm-10">
				<textarea  class="form-control"  ng-model="controller.newEvent.log" placeholder="input log..."></textarea>
			</div>
		</div>
		
		<div class="divider"></div>
		<div class="form-group">
			<div class="col-sm-2 control-label"></div>
			<div  class="col-sm-10">
				<input type="checkbox" class="form-control"  ng-model="controller.newEvent.levelOfEmergencyBoolean" > Urgent  (If this log needs to be dealt with immediately.)
			</div>
		</div>
		
		<div class="divider"></div>
		<div class="form-group">
			<div class="col-sm-2 control-label">Related Files Upload (No More than 30Mb)</div>
			<div  class="col-sm-10">
				<button ngf-select="controller.uploadFiles($files,$invalidFiles)" multiple  ngf-max-size="30MB">Select Files</button>
			</div>
		</div>

		<div class="divider"></div>
		<div class="form-group">
			<div class="col-sm-2 control-label">Files</div>
			<div  class="col-sm-10">
				<ul>
					<li ng-repeat="f in controller.files" styple="font:smaller">{{f.name}}
					{{f.$errorParam}}
					<span class="progress" ng-show="f.progress>=0">
						<div style="width:{{f.progress}}%"  ng-bind="f.progress + '%'"></div>
      				</span>
   				 	</li>
    				<li ng-repeat="f in controller.errFiles" style="font:smaller">{{f.name}} {{f.$error}} {{f.$errorParam}}
    				</li> 
  				</ul>
			</div>
		</div>
		<div class="form-group">
			
			<div  class="col-sm-10">
				<button id="addNewLogBtn" type="button" class="btn btn-primary" ng-click="controller.addLogToOrder(newEvent)">Add</button>
				<button type="button" class="btn btn-primary" onclick="location.href='#/view_procurement_order';">Go back</button>
			</div>
		</div>

	</form>	
</div>

<br/>
<br/>
